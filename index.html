<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat with Stylo</title>
  <link rel="icon" href="visuals/favicon.png" type="image/png">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- Markdown parser removed - not needed for static version -->

  <style>
    * {
      font-family: 'Inter', sans-serif;
    }
    
    body {
      background-color: #ffffff !important;
    }

    .chat-container {
      transition: flex 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .image-container {
      transition: flex 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .message {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .message.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Smooth transitions for interface changes */
    #welcome-section {
      transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out;
    }

    #chat-interface {
      transition: opacity 0.4s ease-in-out, transform 0.6s ease-out;
    }

    #chat-area {
      transition: flex 0.8s ease-out;
    }

    #photo-area {
      transition: width 0.8s ease-out, opacity 0.6s ease-in-out;
    }

    .message {
      opacity: 0;
      transform: translateX(-30px);
      transition: all 0.4s ease-out;
    }

    .message.visible {
      opacity: 1;
      transform: translateX(0);
    }

    /* Button press animation */
    #submit-btn {
      transition: all 0.2s ease-in-out;
    }

    #submit-btn:active {
      opacity: 0.8;
    }

    /* Input focus animation */
    #chat-input {
      transition: all 0.3s ease-in-out;
    }

    #chat-input:focus {
      box-shadow: 0 0 0 2px rgba(45, 90, 61, 0.2);
    }

    .typing-bubble span {
      height: 8px;
      width: 8px;
      background-color: #6b7280;
      border-radius: 50%;
      display: inline-block;
      margin: 0 3px;
      animation: blink 1.4s infinite both;
    }

    .typing-bubble span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-bubble span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes blink {
      0%, 80%, 100% { opacity: 0.3; }
      40% { opacity: 1; }
    }

    #outfit-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: none;
      border-radius: 12px;
    }

  </style>
</head>

<body class="bg-white h-screen" style="background-color: #ffffff !important;">
  <!-- Draggable Sidebar with integrated tab -->
  <div id="draggable-sidebar" class="fixed top-0 left-0 h-full w-80 bg-white text-gray-900 transform -translate-x-full transition-transform duration-300 z-40">
    <!-- Tab that extends from sidebar -->
    <div class="absolute top-1/2 -right-12 w-12 h-24 bg-white cursor-pointer rounded-r-full rounded-l-none flex items-center justify-center border-2 border-gray-200 transform -translate-y-1/2" id="menu-toggle">
      <svg class="w-6 h-6 text-gray-700 -ml-1" fill="currentColor" viewBox="0 0 24 24">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
      </svg>
    </div>
    
    <div class="p-6">
      <h2 class="text-gray-500 text-sm font-medium mb-4">Chat History</h2>
      <div class="space-y-2 overflow-y-auto max-h-full">
        <div class="text-gray-400 text-sm text-center py-8">No chat history yet</div>
      </div>
    </div>
  </div>

  <!-- Main Content Container -->
  <div id="main-content" class="transition-all duration-300 ease-out">
  <!-- Initial Welcome Message (Always visible) -->
  <div id="welcome-section" class="flex items-center justify-center h-screen">
    <div class="text-center transform -translate-y-8">
      <h1 class="text-2xl font-medium mb-4" style="color: #2D5A3D;">hello, welcome to taylor!</h1>
      <h2 class="text-gray-900 text-4xl font-light">Where you dont find clothes, the clothes find you</h2>
    </div>
  </div>

  <!-- Loading Page (Hidden initially) -->
  <div id="loading-page" class="hidden fixed inset-0 bg-white flex items-center justify-center z-30">
    <div class="text-center">
      <img src="Loading.gif" alt="Loading..." class="h-32 w-32 mx-auto">
    </div>
  </div>

    <!-- Chat Interface (Hidden initially) -->
    <div id="chat-interface" class="hidden h-screen flex bg-white" style="background-color: #ffffff !important;">
    <!-- Chat Area -->
    <div id="chat-area" class="flex-1 p-8 flex flex-col border-r border-gray-200" style="background-color: #fafafa;">
      <div class="flex-1 overflow-y-auto mb-6" id="chat-messages">
        <!-- Messages will appear here -->
      </div>
    </div>

    <!-- Photo Area -->
    <div id="photo-area" class="w-0 flex flex-col items-center justify-center p-6 transition-all duration-500" style="background-color: #fdfdfd;">
      <div id="photo-placeholder" class="text-gray-500 text-lg text-center">
        <!-- Person image will be displayed here -->
      </div>
      
      <!-- Lazy Loading Spinner -->
      <div id="loading-spinner" class="hidden flex flex-col items-center justify-center">
        <img src="Loading.gif" alt="Loading..." class="h-32 w-32">
      </div>
      
      <!-- Generated Image -->
      <div class="rounded-lg p-4 hidden" id="image-container" style="background-color: #fdfdfd;">
        <img id="gemini-image" src="unnamed.png" alt="Generated Outfit" class="max-w-full max-h-full rounded-lg">
      </div>
      <img id="user-photo" alt="User Photo" class="max-w-full max-h-full hidden rounded-lg">
    </div>
  </div>

  <!-- Bottom Chat Input Bar -->
  <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 w-full max-w-4xl px-6">
    <!-- Landing Page - Photo Drop Zone -->
    <div id="photo-drop-zone" class="bg-white rounded-full px-4 py-4 flex flex-col items-center border-2 border-dashed border-gray-300 shadow-sm hover:border-gray-400 transition-colors cursor-pointer max-w-md mx-auto">
      <div class="flex items-center space-x-2 text-gray-600 mb-2">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </div>
      <div class="text-gray-700 text-sm font-medium">Click here to get started</div>
      <div class="text-gray-500 text-xs mt-1">Get started with taylor.ai</div>
    </div>
    
    <!-- Chat Interface - Input Bar (Hidden initially) -->
    <div id="chat-input-bar" class="hidden bg-white rounded-full px-6 py-4 flex items-center border border-gray-200 shadow-sm">
      
      <!-- Center - Input Field -->
      <input 
        type="text" 
        id="chat-input"
        placeholder="Ask taylor.ai anything..." 
        class="flex-1 bg-transparent text-gray-900 placeholder-gray-500 outline-none text-lg"
      >
      
      <!-- Right Side - Submit Button -->
      <button id="submit-btn" class="ml-4 bg-gray-200 text-gray-700 w-10 h-10 rounded-full hover:bg-gray-300 transition-colors flex items-center justify-center">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Full Interface (Hidden by default) -->
  <div id="full-interface" class="hidden h-screen flex">
    <!-- Left Sidebar -->
    <div class="w-16 bg-gray-100 flex flex-col items-center py-4 space-y-6">
      <div class="text-center">
        <div class="text-gray-900 font-medium">Stylo</div>
        <div class="text-gray-500 text-xs">2.5 Flash</div>
      </div>
    </div>

    <!-- Chat History Sidebar -->
    <div id="chat-history" class="w-0 bg-gray-50 border-r border-gray-200 transition-all duration-300 overflow-hidden">
      <div class="p-4">
        <h3 class="text-gray-900 font-medium mb-4">Previous Chats</h3>
        <div class="space-y-2">
          <div class="p-3 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors">
            <div class="text-sm text-gray-700">Shopping for summer outfits</div>
            <div class="text-xs text-gray-500 mt-1">2 hours ago</div>
          </div>
          <div class="p-3 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors">
            <div class="text-sm text-gray-700">Finding formal wear</div>
            <div class="text-xs text-gray-500 mt-1">Yesterday</div>
          </div>
          <div class="p-3 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors">
            <div class="text-sm text-gray-700">Casual weekend look</div>
            <div class="text-xs text-gray-500 mt-1">3 days ago</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col">
    <!-- Top Header -->
    <div class="bg-gray-100 px-6 py-4 flex justify-between items-center border-b border-gray-200">
      <div></div>
      <div></div>
    </div>

    <!-- Chat Container -->
    <div id="app-container" class="flex-1 flex">
      <div class="chat-container flex-1 flex flex-col justify-center items-center p-8 bg-white">
        <div class="text-center mb-12">
          <h1 class="text-2xl font-medium mb-4" style="color: #2D5A3D;">hello, I'm taylor.ai</h1>
          <h2 class="text-gray-900 text-4xl font-light mb-12">Let's go shopping</h2>
        </div>

        <!-- Chat Messages Area (Hidden initially) -->
        <div id="chat-box" class="hidden w-full max-w-4xl flex-1 overflow-y-auto space-y-4 mb-6">
          <!-- Initial placeholder message -->
          <div id="placeholder-message" class="flex justify-center items-center h-full">
            <div class="text-center">
              <div class="text-gray-500 text-lg mb-2">Please upload a photo so we can begin shopping</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Image Container -->
      <div class="image-container w-0 bg-gray-100 flex flex-col items-center justify-center p-8 border-l border-gray-200">
        <div id="loading" class="hidden text-gray-500 text-lg">Generating outfit image...</div>
        <img id="outfit-image" alt="Generated Image" class="max-w-full max-h-full">
      </div>
    </div>

    <!-- Bottom Input Bar -->
    <div class="bg-gray-100 px-6 py-4 border-t border-gray-200">
      <div class="flex items-center bg-white rounded-2xl px-4 py-3 border border-gray-300 shadow-sm">
        
        <input 
          type="text" 
          id="user-input" 
          placeholder="Ask Stylo" 
          class="flex-1 bg-transparent text-gray-900 placeholder-gray-500 outline-none text-lg"
        >
      </div>
    </div>
  </div>

  <script>
    let isFirstMessage = true;

    // Static frontend version - no backend connection
    function sendMessage() {
      const userInputField = document.getElementById("user-input");
      const userInput = userInputField.value.trim();
      if (userInput === "") return;
      userInputField.value = "";

      const chatBox = document.getElementById("chat-box");
      const chatContainer = document.querySelector('.chat-container');
      const welcomeSection = chatContainer.querySelector('.text-center');

      // Hide welcome section and show chat box on first message
      if (isFirstMessage) {
        welcomeSection.style.display = 'none';
        chatBox.classList.remove('hidden');
        chatBox.classList.add('flex', 'flex-col');
        
        // Hide placeholder message
        const placeholderMessage = document.getElementById('placeholder-message');
        if (placeholderMessage) {
          placeholderMessage.style.display = 'none';
        }
        
        // Collapse left side and expand right side
        chatContainer.style.flex = '0 0 50%';
        document.querySelector('.image-container').style.flex = '0 0 50%';
        document.getElementById('loading').classList.remove('hidden');
        isFirstMessage = false;
      }

      // Add user message
      const userMsg = document.createElement("div");
      userMsg.className = "message self-end mb-4";
      userMsg.innerHTML = `
        <div class="text-white px-4 py-3 rounded-2xl rounded-br-md max-w-xs" style="background-color: #2D5A3D;">
          ${userInput}
        </div>`;
      chatBox.appendChild(userMsg);
      setTimeout(() => userMsg.classList.add("visible"), 10);

      // Add typing indicator
      const typingIndicator = document.createElement("div");
      typingIndicator.className = "message self-start mb-4 visible";
      typingIndicator.innerHTML = `
        <div class="bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-bl-md max-w-xs">
          <div class="flex space-x-1">
          <span></span><span></span><span></span>
          </div>
        </div>`;
      chatBox.appendChild(typingIndicator);
      chatBox.scrollTop = chatBox.scrollHeight;

      // Simulate lazy loading with typing animation
      setTimeout(() => {
        // Remove typing indicator
        typingIndicator.style.opacity = '0';
        setTimeout(() => typingIndicator.remove(), 300);

        // Add static response with fade-in effect
        const responseMsg = document.createElement("div");
        responseMsg.className = "message self-start mb-4";
        responseMsg.innerHTML = `
          <div class="bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-bl-md max-w-xs">
            This is a static demo. Backend connection has been removed.
          </div>`;
        chatBox.appendChild(responseMsg);
        setTimeout(() => responseMsg.classList.add("visible"), 10);
        chatBox.scrollTop = chatBox.scrollHeight;

        // Show placeholder image message
        document.getElementById('loading').textContent = 'No image generated.';
      }, 2000); // 2 second delay to simulate processing

        chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Enter key functionality
    document.getElementById("user-input").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        sendMessage();
      }
    });

    // Sidebar functionality
    let isDragging = false;
    let startX = 0;
    let currentX = 0;
    let sidebar = document.getElementById("draggable-sidebar");
    let isOpen = false;

    // Click handler for tab
    document.getElementById("menu-toggle").addEventListener("click", function(e) {
      e.stopPropagation();
      toggleSidebar();
    });

    // Drag functionality for both sidebar and tab
    sidebar.addEventListener("mousedown", function(e) {
      isDragging = true;
      startX = e.clientX;
      sidebar.style.transition = "none";
      document.addEventListener("mousemove", handleDrag);
      document.addEventListener("mouseup", handleDragEnd);
      e.preventDefault();
    });

    function handleDrag(e) {
      if (!isDragging) return;
      
      currentX = e.clientX - startX;
      const sidebarWidth = sidebar.offsetWidth;
      const mainContent = document.getElementById("main-content");
      
      // Only allow dragging to the right when closed, or to the left when open
      if (!isOpen && currentX > 0) {
        const translateX = Math.min(currentX - sidebarWidth, 0);
        sidebar.style.transform = `translateX(${translateX}px)`;
        // Resize main content based on how much sidebar is visible
        const visibleWidth = Math.max(0, sidebarWidth + translateX);
        mainContent.style.marginLeft = `${visibleWidth}px`;
      } else if (isOpen && currentX < 0) {
        const translateX = Math.max(currentX, -sidebarWidth);
        sidebar.style.transform = `translateX(${translateX}px)`;
        // Resize main content based on how much sidebar is visible
        const visibleWidth = Math.max(0, sidebarWidth + translateX);
        mainContent.style.marginLeft = `${visibleWidth}px`;
      }
    }

    function handleDragEnd() {
      if (!isDragging) return;
      
      isDragging = false;
      sidebar.style.transition = "transform 0.3s ease";
      
      const sidebarWidth = sidebar.offsetWidth;
      const threshold = sidebarWidth / 3;
      
      if (!isOpen) {
        // Opening from left
        if (currentX > threshold) {
          openSidebar();
        } else {
          closeSidebar();
        }
      } else {
        // Closing to the left
        if (currentX < -threshold) {
          closeSidebar();
        } else {
          openSidebar();
        }
      }
      
      sidebar.style.transform = "";
      const mainContent = document.getElementById("main-content");
      if (isOpen) {
        const sidebarWidth = sidebar.offsetWidth;
        mainContent.style.marginLeft = `${sidebarWidth}px`;
      } else {
        mainContent.style.marginLeft = "0px";
      }
      document.removeEventListener("mousemove", handleDrag);
      document.removeEventListener("mouseup", handleDragEnd);
    }

    function toggleSidebar() {
      if (isOpen) {
        closeSidebar();
      } else {
        openSidebar();
      }
    }

    function openSidebar() {
      sidebar.classList.remove("-translate-x-full");
      isOpen = true;
      const mainContent = document.getElementById("main-content");
      const sidebarWidth = sidebar.offsetWidth;
      mainContent.style.marginLeft = `${sidebarWidth}px`;
    }

    function closeSidebar() {
      sidebar.classList.add("-translate-x-full");
      isOpen = false;
      const mainContent = document.getElementById("main-content");
      mainContent.style.marginLeft = "0px";
    }

    // Simple click to start functionality
    const photoDropZone = document.getElementById("photo-drop-zone");
    
    // Click to start chat
    photoDropZone.addEventListener("click", function() {
      // Hide photo drop zone and show chat input bar
      document.getElementById("photo-drop-zone").classList.add("hidden");
      document.getElementById("chat-input-bar").classList.remove("hidden");
      
      // Trigger the interface transition
      handleSubmit();
    });

    // Submit button functionality
    document.getElementById("submit-btn").addEventListener("click", function() {
      handleSubmit();
    });

    // Enter key functionality for chat input
    document.getElementById("chat-input").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault();
        handleSubmit();
      }
    });

    function handleSubmit() {
      const input = document.getElementById("chat-input");
      const message = input ? input.value.trim() : "";
      
      // For the initial transition (no message needed)
      if (message === "") {
        // Just trigger the interface transition
        triggerInterfaceTransition();
        return;
      }
      
      // Add subtle button press animation if button exists
      const submitBtn = document.getElementById("submit-btn");
      if (submitBtn) {
        submitBtn.style.opacity = "0.8";
        setTimeout(() => {
          submitBtn.style.opacity = "1";
        }, 150);
      }
      
      // Clear input smoothly if input exists
      if (input && message !== "") {
        input.value = "";
      }
      
      triggerInterfaceTransition();
    }
    
    function triggerInterfaceTransition() {
      // Show loading page first
      const welcomeSection = document.getElementById("welcome-section");
      const loadingPage = document.getElementById("loading-page");
      
      welcomeSection.style.opacity = "0";
      welcomeSection.style.transform = "translateY(-20px)";
      
      setTimeout(() => {
        welcomeSection.style.display = 'none';
        loadingPage.classList.remove('hidden');
        
        // After 4 seconds, slide in the chat interface from the right
        setTimeout(() => {
          loadingPage.style.display = 'none';
          const chatInterface = document.getElementById("chat-interface");
          const chatArea = document.getElementById("chat-area");
          const photoArea = document.getElementById("photo-area");
          
          // Set up the final layout
          chatArea.style.flex = '0 0 60%';
          photoArea.style.width = '40%';
          
          // Start with everything off-screen to the right
          chatInterface.classList.remove('hidden');
          chatInterface.classList.add('flex');
          chatInterface.style.opacity = "1";
          chatInterface.style.transform = "translateX(100%)";
          
          // Smoothly slide in from the right
          setTimeout(() => {
            chatInterface.style.transition = "transform 0.8s ease-out";
            chatInterface.style.transform = "translateX(0)";
          }, 50);
        
        // Add user message with smooth flow
        setTimeout(() => {
          const chatMessages = document.getElementById("chat-messages");
          const userMessage = document.createElement("div");
          userMessage.className = "flex justify-end mb-4 message";
          userMessage.innerHTML = `
            <div class="text-white px-4 py-3 rounded-2xl rounded-br-md max-w-xs" style="background-color: #2D5A3D;">
              Let's start shopping!
            </div>
          `;
          chatMessages.appendChild(userMessage);
          
          // Smooth flow in user message from left
          setTimeout(() => {
            userMessage.classList.add("visible");
          }, 100);
        }, 400);
        
        // Scroll to bottom smoothly
        setTimeout(() => {
          const chatMessages = document.getElementById("chat-messages");
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 600);
        
        // Show the outfit image after interface loads
        setTimeout(() => {
          const imageContainer = document.getElementById("image-container");
          imageContainer.classList.remove("hidden");
        }, 1000);
        
        // Simulate taylor.ai response with smooth typing effect
        setTimeout(() => {
          const chatMessages = document.getElementById("chat-messages");
          // Add typing indicator with smooth flow
          const typingIndicator = document.createElement("div");
          typingIndicator.className = "flex justify-start mb-4 message";
          typingIndicator.innerHTML = `
            <div class="bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-bl-md max-w-xs">
              <div class="flex space-x-1">
                <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse"></span>
                <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.2s;"></span>
                <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.4s;"></span>
              </div>
            </div>
          `;
          chatMessages.appendChild(typingIndicator);
          
          // Smooth flow in typing indicator from left
          setTimeout(() => {
            typingIndicator.classList.add("visible");
          }, 100);
          
          chatMessages.scrollTop = chatMessages.scrollHeight;
          
          // Replace typing with actual response with smooth flow
          setTimeout(() => {
            typingIndicator.style.opacity = "0";
            setTimeout(() => {
              typingIndicator.remove();
              
              const botMessage = document.createElement("div");
              botMessage.className = "flex justify-start mb-4 message";
              botMessage.innerHTML = `
                <div class="bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-bl-md max-w-xs">
                  Perfect! I've generated your personalized outfit. Check out the image on the right - this style should complement your preferences beautifully!
                </div>
              `;
              chatMessages.appendChild(botMessage);
              
              setTimeout(() => {
                botMessage.classList.add("visible");
                chatMessages.scrollTop = chatMessages.scrollHeight;
              }, 100);
            }, 300);
          }, 1500);
        }, 1000);
      }, 4000);
      });
    }
  </script>
  </div>
</body>
</html>